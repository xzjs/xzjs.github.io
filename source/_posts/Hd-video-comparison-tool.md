---
title: 高清视频对比工具
date: 2021-08-27 11:31:19
tags: c#
categories: 实战
thumbnail: https://tva4.sinaimg.cn/large/002V8U8rgy1gtv79uxtnwj61z5140b2902.jpg
---
做完了一个项目，想了想应该写点什么，不然项目就白做了，但仔细一想，又不知道该写什么，愁人，就想到啥写啥吧
## 目的
广电搞了个算法，能将不清晰的视频变成高清视频，现在需要一个工具能对比生成前后的视频
## 难点
### 支持h265的视频播放器少之又少
需要支持h265编码的视频，导致目前绝大多数的播放器无法使用，web版直接被抛弃。最后找到了一个老外开发的支持h265的库，[https://github.com/ZeBobo5/Vlc.DotNet](https://github.com/ZeBobo5/Vlc.DotNet),只支持winform，对wpf的支持一团糟。没有办法，只能硬着头皮上了，但随着写着写着就发现这个库消耗惊人，cpu100%是常态了，就一边开发一边找还有没有更好的东西。偶然间发现，vs自带的播放器装一个支持h265的插件，就可以支持播放h265的视频了，又小巧消耗又小，真有一种众里寻他千百度，蓦然回首那人却在灯火阑珊处感觉，这个难点算是圆满解决了。
### 两个视频播放不同步
要想两个视频进行对比，那就必须得同步播放，否则对比个毛线。但开发时发现，总会有莫名其妙的原因导致两个视频无法同步播放。之前使用c#的媒体控制功能，从理论上讲会使两个视频同步播放，如果不同步就会让一个视频等待，直到两个视频都同步播放，但实操来看，完全是扯淡，遂放弃了。问了很多人，查了很多资料，最后也没有找到比较好的办法，只能是播放的时候检测如果两个视频当前的时间内不一样，就让它俩相等，但还是经常出问题，只能靠人工多次拖拽进度条，多矫正几次才能实现同步播放。
## 最后
代码由于合同版权的问题不能开源了，目前也只能想到这么多了，等啥时候想到更多或者后面有什么心得进展再来补充